<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>NOVA | Terminal</title>
<link rel="icon" type="image/png" href="https://github.com/TheDevMarcus/verison/blob/main/logos/decemberlogo.png?raw=true">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;700&family=Cinzel:wght@400;700&family=JetBrains+Mono:wght@300;400;700&display=swap" rel="stylesheet">
<style>
    :root {
        --primary: #00f2ea;
        --primary-dim: rgba(0, 242, 234, 0.1);
        --accent: #ff0050;
        --bg-deep: #050505;
        --glass: rgba(20, 20, 25, 0.6);
        --glass-border: rgba(255, 255, 255, 0.08);
        --text-main: #ffffff;
        --text-muted: #8b9bb4;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; scrollbar-width: thin; scrollbar-color: var(--primary) transparent; }
    
    html, body {
        width: 100%; height: 100%; margin: 0; padding: 0;
        background: var(--bg-deep);
        font-family: 'Outfit', sans-serif;
        color: var(--text-main);
        overflow: hidden;
    }

    /* --- Background FX --- */
    .bg-gradient {
        position: fixed; inset: 0;
        background: radial-gradient(circle at 50% 0%, #1a233a 0%, #000000 80%);
        z-index: 0;
    }
    .grid-overlay {
        position: fixed; inset: 0;
        background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        mask-image: radial-gradient(circle at center, black 30%, transparent 80%);
        pointer-events: none; z-index: 1; opacity: 0.4;
    }
    canvas { position: fixed; inset: 0; z-index: 2; pointer-events: none; opacity: 0.6; }

    /* --- Layout Structure (Zoom Adaptive) --- */
    .wrapper {
        position: relative; z-index: 5;
        height: 100vh; width: 100vw;
        display: flex;
        align-items: center; justify-content: center;
        opacity: 0; transition: opacity 1s ease;
        padding: 20px;
    }

    .layout-container {
        /* This is the key change for Zoom Adaptation */
        width: 95%; max-width: 1300px;
        height: 85vh; min-height: 500px;
        display: flex; gap: 20px;
        /* Ensure it scales within the viewport */
    }

    .glass-panel {
        background: var(--glass);
        border: 1px solid var(--glass-border);
        border-top: 1px solid rgba(255,255,255,0.15);
        border-radius: 24px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.6), inset 0 0 0 1px rgba(255,255,255,0.02);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        display: flex; flex-direction: column;
        overflow: hidden; /* Hide outer overflow */
        transition: transform 0.3s, box-shadow 0.3s;
    }

    .card-main { 
        flex: 2; 
        padding: 0; 
        position: relative; 
        display: flex; flex-direction: column;
        animation: breathGlow 8s infinite alternate;
    }
    
    @keyframes breathGlow {
        0% { box-shadow: 0 20px 50px rgba(0,0,0,0.6); border-color: var(--glass-border); }
        100% { box-shadow: 0 20px 60px rgba(0, 242, 234, 0.05); border-color: rgba(0, 242, 234, 0.15); }
    }

    .card-content-scroll {
        flex: 1;
        overflow-y: auto; /* Internal scrolling if zoomed in */
        padding: 40px;
        display: flex; flex-direction: column;
    }

    .card-logs { 
        flex: 1; 
        min-width: 300px; 
        background: rgba(8, 8, 10, 0.6); 
        border-left: 1px solid rgba(255,255,255,0.05);
    }

    /* --- Typography & Elements --- */
    h1 {
        margin: 0; font-family: 'Cinzel', serif;
        font-size: clamp(2rem, 4vw, 3.5rem); /* Responsive Font */
        letter-spacing: 12px; text-align: center;
        color: white;
        text-shadow: 0 0 30px rgba(255,255,255,0.2);
    }

    .tag {
        text-align: center; margin-bottom: 30px;
        font-size: 0.7rem; letter-spacing: 4px;
        text-transform: uppercase; color: var(--primary);
        display: flex; align-items: center; justify-content: center; gap: 10px;
        font-weight: 600; text-shadow: 0 0 10px var(--primary-dim);
    }
    .status-dot {
        width: 6px; height: 6px; background: var(--primary); border-radius: 50%;
        box-shadow: 0 0 8px var(--primary); animation: blink 2s infinite;
    }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

    /* --- Settings Icon --- */
    .icon-btn {
        position: absolute; top: 20px; right: 20px;
        color: rgba(255,255,255,0.3); cursor: pointer;
        width: 40px; height: 40px; border-radius: 12px;
        display: flex; align-items: center; justify-content: center;
        background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05);
        transition: 0.3s; z-index: 10;
    }
    .icon-btn:hover { background: rgba(255,255,255,0.1); color: white; transform: rotate(90deg); }

    /* --- App Grid --- */
    .apps-container {
        display: grid; grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
        gap: 20px; padding: 10px;
        margin-bottom: auto;
    }
    .app-item {
        display: flex; flex-direction: column; align-items: center; gap: 12px;
        cursor: pointer; position: relative; group;
    }
    .app-icon {
        width: 65px; height: 65px; border-radius: 20px;
        background: rgba(255,255,255,0.03);
        border: 1px solid rgba(255,255,255,0.08);
        display: flex; align-items: center; justify-content: center;
        overflow: hidden; transition: 0.4s cubic-bezier(0.3, 1.2, 0.5, 1);
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .app-item:hover .app-icon {
        transform: translateY(-5px) scale(1.05);
        border-color: var(--primary);
        box-shadow: 0 10px 30px -5px var(--primary-dim);
    }
    .app-icon img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: 0.3s; }
    .app-item:hover .app-icon img { opacity: 1; }
    .app-name { font-size: 0.7rem; color: #888; letter-spacing: 0.5px; transition: 0.3s; }
    .app-item:hover .app-name { color: white; }
    .delete-badge {
        position: absolute; top: -5px; right: -5px; width: 22px; height: 22px;
        background: var(--accent); border-radius: 50%; color: white;
        display: flex; align-items: center; justify-content: center;
        opacity: 0; transform: scale(0.5); transition: 0.2s; pointer-events: none; z-index: 2;
    }
    .app-item:hover .delete-badge { opacity: 1; transform: scale(1); pointer-events: auto; }

    /* --- Input & HUD --- */
    .hud-controls {
        margin-top: 20px;
        background: linear-gradient(180deg, rgba(15,15,18,0.6), rgba(5,5,8,0.8));
        padding: 20px; border-radius: 20px;
        border: 1px solid rgba(255,255,255,0.06);
    }
    input {
        width: 100%; padding: 16px 20px; border-radius: 12px;
        background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1);
        color: var(--primary); font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;
        outline: none; transition: 0.3s; margin-bottom: 12px;
    }
    input:focus { border-color: var(--primary); box-shadow: 0 0 15px var(--primary-dim); background: rgba(0,0,0,0.6); }
    
    button#igniteBtn {
        width: 100%; padding: 18px; border-radius: 12px; border: none;
        background: #1a1a1a; color: #555;
        font-family: 'Outfit', sans-serif; font-weight: 800; letter-spacing: 4px;
        cursor: pointer; position: relative; overflow: hidden; transition: all 0.4s;
    }
    button#igniteBtn:not(:disabled) {
        background: linear-gradient(90deg, #00f2ea, #0080ff);
        color: #000; box-shadow: 0 5px 20px rgba(0, 242, 234, 0.2);
    }
    button#igniteBtn:not(:disabled):hover {
        transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0, 242, 234, 0.4);
        letter-spacing: 6px;
    }

    /* --- Logs --- */
    .logs-header-area {
        padding: 20px 25px; border-bottom: 1px solid rgba(255,255,255,0.05);
        font-size: 0.7rem; color: var(--text-muted); font-weight: 800; letter-spacing: 2px;
        display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.01);
    }
    .logs-scroll-area { flex: 1; overflow-y: auto; padding: 20px; }
    .log-card {
        background: rgba(255,255,255,0.02); border-left: 2px solid var(--log-color, #555);
        border-radius: 0 8px 8px 0; padding: 15px; margin-bottom: 15px;
        transition: 0.2s;
    }
    .log-card:hover { background: rgba(255,255,255,0.04); transform: translateX(5px); }
    .log-title { font-size: 0.75rem; font-weight: 700; color: #fff; display: block; margin-bottom: 5px;}
    .log-msg { font-size: 0.7rem; color: #aaa; line-height: 1.5; font-family: 'JetBrains Mono', monospace;}
    
    /* --- Footer --- */
    .credits { margin-top: 15px; text-align: center; font-size: 0.6rem; color: rgba(255,255,255,0.2); }
    .footer-links a { color: inherit; text-decoration: none; margin: 0 8px; transition: 0.2s; border-bottom: 1px dotted transparent;}
    .footer-links a:hover { color: var(--primary); border-color: var(--primary); }

    /* --- Overlays & Modals --- */
    #splash-screen {
        position: fixed; inset: 0; z-index: 9999; background: #000;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        transition: opacity 0.8s; cursor: pointer;
    }
    .quote-text { font-family: 'Cinzel', serif; font-size: 1.2rem; color: #fff; letter-spacing: 1px; margin-bottom: 15px; max-width: 600px; text-align: center; line-height: 1.4;}
    .quote-author { color: var(--primary); font-family: 'JetBrains Mono'; font-size: 0.8rem; }
    
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(15px); display: none; align-items: center; justify-content: center; z-index: 100; opacity: 0; transition: 0.3s; }
    .modal.show { display: flex; opacity: 1; }
    .modal-content { background: #0a0a0a; border: 1px solid #222; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; }
    .action-btn { width: 100%; padding: 14px; border-radius: 8px; margin-top: 10px; cursor: pointer; border: none; font-weight: 700; font-family: 'Outfit'; }
    .action-btn.primary { background: var(--primary); color: #000; }
    .action-btn:hover { opacity: 0.9; }
    
    .setting-label { display: block; color: #666; font-size: 0.7rem; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; }
    .presets-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 15px; }
    .preset-btn { background: #111; color: #888; border: 1px solid #222; padding: 8px; font-size: 0.6rem; cursor: pointer; border-radius: 6px; }
    .preset-btn:hover { color: white; border-color: var(--primary); }

    .locked-overlay {
        position: absolute; inset: 0; background: rgba(5,5,5,0.95); z-index: 50;
        display: none; align-items: center; justify-content: center; flex-direction: column; text-align: center;
    }
    .card-main.locked .locked-overlay { display: flex; }

    #mobile-warning { position: fixed; inset: 0; background: #000; z-index: 10000; display: none; align-items: center; justify-content: center; flex-direction: column; padding: 20px; text-align: center; }
    
    @media (max-width: 800px) {
        .wrapper { display: none !important; }
        #mobile-warning { display: flex !important; }
    }
</style>
</head>
<body>

<div id="splash-screen" onclick="skipSplash()">
    <div class="quote-text" id="splashQuote">"Initializing..."</div>
    <div class="quote-author" id="splashAuthor"></div>
    <div style="margin-top: 30px; font-size: 0.6rem; color: #444; letter-spacing: 2px;">CLICK TO INITIALIZE</div>
</div>

<div id="mobile-warning">
    <div style="font-size: 3rem; color: var(--accent); margin-bottom: 20px;">⚠</div>
    <h2 style="font-family:'Cinzel'; color: white;">DESKTOP REQUIRED</h2>
    <p style="color:#666; font-size: 0.8rem; line-height: 1.5;">The NOVA Protocol requires a high-resolution terminal interface.</p>
</div>

<div class="bg-gradient"></div>
<div class="grid-overlay"></div>
<canvas id="snow"></canvas>

<div class="wrapper" id="mainWrapper">
    <div class="layout-container">
        
        <div class="glass-panel card-main" id="mainCard">
            <div class="icon-btn" onclick="openSettings()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </div>

            <div class="locked-overlay">
                <h2 style="color: var(--accent); font-family: 'Cinzel'; margin-bottom: 10px;">SYSTEM OUTDATED</h2>
                <p style="color: #888; margin-bottom: 20px;">Security protocol mismatch.</p>
                <a href="https://thedevmarcus.github.io/verison/" target="_blank" class="action-btn primary" style="text-decoration:none; width: auto; padding: 10px 30px;">GET PATCH</a>
            </div>

            <div class="card-content-scroll">
                <h1>NOVA</h1>
                <div class="tag">
                    <div class="status-dot"></div>
                    <span id="statusText">INITIALIZING NETWORK...</span>
                </div>

                <div class="apps-container" id="appsContainer">
                    </div>

                <div class="hud-controls">
                    <input id="url" placeholder="ENTER TARGET PROTOCOL (URL)..." autocomplete="off">
                    <button id="igniteBtn" onclick="launch()" disabled>WAITING...</button>
                </div>

                <div class="credits">
                    <div>Architect: <span>Chip Hill</span></div>
                    <div class="footer-links">
                        <a href="#" target="_blank">Suggestion</a>
                        <a href="#" target="_blank">Report Glitch</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-panel card-logs">
            <div class="logs-header-area">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
                DEV TRANSMISSIONS
            </div>
            <div class="logs-scroll-area" id="devLogsContainer">
                <div style="text-align:center; padding:30px; color:#444; font-size:0.7rem;">DECRYPTING FEED...</div>
            </div>
        </div>

    </div>
</div>

<div class="modal" id="settingsModal">
    <div class="modal-content">
        <h2 style="font-family:'Cinzel'; color:white; text-align:center; margin-bottom:20px;">STEALTH CONFIG</h2>
        
        <div style="background:#111; padding:15px; border-radius:10px; display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border:1px solid #222;">
            <span style="font-size:0.8rem; font-weight:700; color:white;">Cloak Mode</span>
            <input type="checkbox" id="cloak" onchange="toggleStealthSettings()" style="accent-color: var(--primary); transform:scale(1.2);">
        </div>

        <div id="stealthConfig" style="display:none;">
            <div class="setting-label">Tab Title</div>
            <input id="cloakTitle" placeholder="Google Docs">
            <div class="setting-label">Favicon URL</div>
            <input id="cloakIcon" placeholder="https://...">
            
            <div class="presets-grid">
                <button class="preset-btn" onclick="setPreset('Google Classroom', 'https://ssl.gstatic.com/classroom/favicon.png')">Classroom</button>
                <button class="preset-btn" onclick="setPreset('Google Drive', 'https://ssl.gstatic.com/images/branding/product/1x/drive_2020q4_32dp.png')">Drive</button>
                <button class="preset-btn" onclick="setPreset('Docs', 'https://ssl.gstatic.com/docs/doclist/images/infinite_wallpapers/v2/google-docs.ico')">Docs</button>
                <button class="preset-btn" onclick="setPreset('Gmail', 'https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico')">Gmail</button>
                <button class="preset-btn" onclick="setPreset('Canvas', 'https://du11hjcvx0uqb.cloudfront.net/dist/images/favicon-e10d657a73.ico')">Canvas</button>
                <button class="preset-btn" onclick="setPreset('Schoology', 'https://asset-cdn.schoology.com/sites/all/themes/schoology_theme/favicon.ico')">Schoology</button>
            </div>
        </div>

        <div style="display:flex; gap:10px; margin-top:20px;">
            <button onclick="saveSettings()" class="action-btn primary">SAVE</button>
            <button onclick="closeModals()" class="action-btn" style="background:#222; color:#fff;">CANCEL</button>
        </div>
    </div>
</div>

<div class="modal" id="addAppModal">
    <div class="modal-content">
        <h2 style="font-family:'Cinzel'; color:white; text-align:center; margin-bottom:20px;">NEW UPLINK</h2>
        <div class="setting-label">Name</div>
        <input id="newAppName" placeholder="App Name">
        <div class="setting-label">Target URL</div>
        <input id="newAppUrl" placeholder="https://...">
        <div class="setting-label">Icon URL (Optional)</div>
        <input id="newAppIcon" placeholder="https://...">
        
        <div style="display:flex; gap:10px; margin-top:10px;">
            <button onclick="saveNewApp()" class="action-btn primary">ESTABLISH</button>
            <button onclick="closeModals()" class="action-btn" style="background:#222; color:#fff;">ABORT</button>
        </div>
    </div>
</div>

<div class="modal" id="imgPreviewModal" onclick="closeModals()">
    <img id="previewImageElement" style="max-width:90%; max-height:80vh; border-radius:12px; box-shadow:0 0 50px black; border: 1px solid #333;" src="" onclick="event.stopPropagation()">
</div>

<script>
    /* --- Quote Logic --- */
    const quotes = [
        { t: "The future belongs to those who believe in the beauty of their dreams.", a: "Eleanor Roosevelt" },
        { t: "Any sufficiently advanced technology is indistinguishable from magic.", a: "Arthur C. Clarke" },
        { t: "Freedom is the right to tell people what they do not want to hear.", a: "George Orwell" },
        { t: "Knowledge is power.", a: "Francis Bacon" },
        { t: "I think, therefore I am.", a: "René Descartes" }
    ];
    let splashTimeout;

    function initSplash() {
        const r = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById('splashQuote').innerText = `"${r.t}"`;
        document.getElementById('splashAuthor').innerText = `- ${r.a}`;
        splashTimeout = setTimeout(skipSplash, 3500);
    }
    function skipSplash() {
        clearTimeout(splashTimeout);
        const splash = document.getElementById('splash-screen');
        splash.style.opacity = '0';
        document.getElementById('mainWrapper').style.opacity = '1';
        setTimeout(() => { splash.style.display = 'none'; }, 800);
    }

    /* --- App Logic --- */
    const DEFAULT_APPS = [{ name: "Slope", url: "https://slope-unblocked-10x.github.io/", icon: "https://slopeunblocked.bitbucket.io/img/slope.png" }];
    let userApps = JSON.parse(localStorage.getItem('novaApps')) || DEFAULT_APPS;

    function renderApps() {
        const container = document.getElementById('appsContainer');
        container.innerHTML = userApps.map((app, i) => `
            <div class="app-item" onclick="document.getElementById('url').value='${app.url}'">
                <div class="app-icon">
                    <img src="${app.icon}" onerror="this.src='https://ui-avatars.com/api/?background=111&color=fff&bold=true&name=${app.name}'">
                </div>
                <div class="app-name">${app.name}</div>
                <div class="delete-badge" onclick="deleteApp(event, ${i})">×</div>
            </div>
        `).join('') + `
            <div class="app-item" onclick="openAddAppModal()">
                <div class="app-icon" style="border-style:dashed; border-color:rgba(255,255,255,0.2); color:#555; font-size:24px;">+</div>
                <div class="app-name">Add</div>
            </div>`;
    }

    function deleteApp(e, i) {
        e.stopPropagation();
        if(confirm('Sever this uplink?')) {
            userApps.splice(i,1);
            localStorage.setItem('novaApps', JSON.stringify(userApps));
            renderApps();
        }
    }

    function openAddAppModal() { document.getElementById('addAppModal').classList.add('show'); }
    
    function saveNewApp() {
        const name = document.getElementById('newAppName').value;
        const url = document.getElementById('newAppUrl').value;
        const icon = document.getElementById('newAppIcon').value;
        if(name && url) {
            userApps.push({name, url, icon: icon||'https://ui-avatars.com/api/?background=random&color=fff&name='+name});
            localStorage.setItem('novaApps', JSON.stringify(userApps));
            renderApps();
            closeModals();
            document.getElementById('newAppName').value='';
            document.getElementById('newAppUrl').value='';
            document.getElementById('newAppIcon').value='';
        }
    }

    /* --- Logs Logic --- */
    function openImage(url) {
        document.getElementById('previewImageElement').src = url;
        document.getElementById('imgPreviewModal').classList.add('show');
    }

    async function loadDevLogs() {
        const container = document.getElementById('devLogsContainer');
        try {
            const res = await fetch("https://raw.githubusercontent.com/TheDevMarcus/verison/refs/heads/main/devlogs");
            if(!res.ok) throw new Error("Error");
            const logs = await res.json();
            container.innerHTML = logs.map(log => {
                const color = log.color || 'var(--primary)';
                const imgHtml = log.image ? `<div style="width:100%; height:120px; border-radius:6px; overflow:hidden; margin:10px 0; border:1px solid #333; cursor:zoom-in;" onclick="openImage('${log.image}')"><img src="${log.image}" style="width:100%; height:100%; object-fit:cover;"></div>` : '';
                return `
                <div class="log-card" style="--log-color: ${color}">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <span class="log-title">${log.title}</span>
                        <span style="font-size:0.55rem; color:#666; font-family:'JetBrains Mono';">${log.author}</span>
                    </div>
                    ${imgHtml}
                    <div class="log-msg">${log.message}</div>
                </div>`;
            }).join('');
        } catch(e) {
            container.innerHTML = `<div style="text-align:center; padding:10px; color:#555; font-size:0.7rem;">ENCRYPTION KEY INVALID</div>`;
        }
    }

    /* --- System Logic --- */
    let SYSTEM_LOCKED = true;
    async function verify() {
        const statusEl = document.getElementById('statusText');
        const btn = document.getElementById('igniteBtn');
        loadDevLogs();
        try {
            const res = await fetch("https://raw.githubusercontent.com/TheDevMarcus/verison/main/verison");
            const v = (await res.text()).trim();
            if (v === "1.0.2") {
                SYSTEM_LOCKED = false;
                btn.disabled = false;
                btn.innerText = "IGNITE PROTOCOL";
                statusEl.innerText = `SYSTEM ONLINE | V${v}`;
                statusEl.style.color = "var(--primary)";
            } else {
                document.getElementById('mainCard').classList.add('locked');
                statusEl.innerText = `CRITICAL FAILURE | V${v}`;
                statusEl.style.color = "var(--accent)";
            }
        } catch(e) {
            SYSTEM_LOCKED = false;
            btn.disabled = false;
            btn.innerText = "IGNITE (OFFLINE BYPASS)";
            statusEl.innerText = "OFFLINE MODE";
            statusEl.style.color = "#888";
        }
        renderApps();
    }

    function openSettings() {
        document.getElementById('settingsModal').classList.add('show');
        document.getElementById('cloak').checked = localStorage.getItem('novaCloak') === 'true';
        document.getElementById('cloakTitle').value = localStorage.getItem('novaTitle') || 'Google Docs';
        document.getElementById('cloakIcon').value = localStorage.getItem('novaIcon') || '';
        toggleStealthSettings();
    }
    
    function toggleStealthSettings() {
        document.getElementById('stealthConfig').style.display = document.getElementById('cloak').checked ? 'block' : 'none';
    }
    function setPreset(title, icon) {
        document.getElementById('cloakTitle').value = title;
        document.getElementById('cloakIcon').value = icon;
    }
    function saveSettings() {
        localStorage.setItem('novaCloak', document.getElementById('cloak').checked);
        localStorage.setItem('novaTitle', document.getElementById('cloakTitle').value);
        localStorage.setItem('novaIcon', document.getElementById('cloakIcon').value);
        closeModals();
    }
    function closeModals() {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('show'));
    }

    /* --- LAUNCHER LOGIC (REMASTERED QUICK MENU) --- */
    function launch() {
        const target = document.getElementById('url').value;
        if(!target) return;
        let finalUrl = target.startsWith('http') ? target : 'https://' + target;
        
        const isCloaked = localStorage.getItem('novaCloak') === 'true';
        const cTitle = localStorage.getItem('novaTitle') || 'Google Docs';
        const cIcon = localStorage.getItem('novaIcon') || 'https://ssl.gstatic.com/docs/doclist/images/infinite_wallpapers/v2/google-docs.ico';
        
        const win = window.open('about:blank', '_blank');
        
        const html = `
        <!DOCTYPE html>
        <html>
        <head>
        <title>${isCloaked ? cTitle : 'NOVA'}</title>
        <link rel="icon" href="${isCloaked ? cIcon : ''}">
        <style>
            * { box-sizing: border-box; }
            body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; }
            iframe { width: 100vw; height: 100vh; border: none; display: block; }
            
            /* --- Compact Icon Dock --- */
            #qMenu {
                position: fixed; top: 15px; left: 15px;
                background: rgba(10, 10, 12, 0.6);
                backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
                border: 1px solid rgba(255,255,255,0.1);
                border-radius: 50px; /* Pill shape */
                height: 50px;
                display: flex; align-items: center; gap: 5px;
                padding: 5px;
                transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                width: 50px; /* Collapsed width */
                overflow: hidden;
                z-index: 999999;
                box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            }
            
            #qMenu:hover {
                width: auto; /* Expand to fit icons */
                padding-right: 15px;
                background: rgba(10, 10, 12, 0.9);
                border-color: #00f2ea;
                box-shadow: 0 0 20px rgba(0, 242, 234, 0.2);
            }

            .handle-icon {
                min-width: 40px; height: 40px;
                display: flex; align-items: center; justify-content: center;
                color: rgba(255,255,255,0.7); cursor: default;
            }
            #qMenu:hover .handle-icon { color: #00f2ea; }

            .menu-items {
                display: flex; gap: 8px; opacity: 0; pointer-events: none; transition: 0.2s;
            }
            #qMenu:hover .menu-items { opacity: 1; pointer-events: auto; transition-delay: 0.1s; }

            .dock-btn {
                width: 36px; height: 36px; border-radius: 50%;
                background: rgba(255,255,255,0.1);
                border: 1px solid rgba(255,255,255,0.1);
                color: #ddd; cursor: pointer;
                display: flex; align-items: center; justify-content: center;
                transition: 0.2s; position: relative;
            }
            .dock-btn:hover { background: #00f2ea; color: #000; transform: scale(1.1); }
            
            /* Tooltip */
            .dock-btn::after {
                content: attr(data-tip);
                position: absolute; top: 45px; left: 50%; transform: translateX(-50%);
                background: #000; color: #fff; font-size: 10px; padding: 4px 8px;
                border-radius: 4px; opacity: 0; pointer-events: none; transition: 0.2s;
                white-space: nowrap; border: 1px solid #333;
            }
            .dock-btn:hover::after { opacity: 1; top: 40px; }
            
            svg { width: 18px; height: 18px; stroke-width: 2.5; }
        </style>
        </head>
        <body>
        <iframe id="frm" src="${finalUrl}"></iframe>
        
        <div id="qMenu">
            <div class="handle-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </div>
            <div class="menu-items">
                <div class="dock-btn" data-tip="Back" onclick="window.history.back()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M15 18l-6-6 6-6"/></svg>
                </div>
                <div class="dock-btn" data-tip="Reload" onclick="document.getElementById('frm').src=document.getElementById('frm').src">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M23 4v6h-6"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                </div>
                <div class="dock-btn" data-tip="Swap URL" onclick="changeUrl()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                </div>
                <div class="dock-btn" data-tip="Close" style="color:#ff5555" onclick="window.close()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </div>
            </div>
        </div>
        <script>
            function changeUrl() {
                let u = prompt('Enter new URL:');
                if(u) {
                    if(!u.startsWith('http')) u = 'https://' + u;
                    document.getElementById('frm').src = u;
                }
            }
        <\/script>
        </body>
        </html>`;
        
        win.document.write(html);
    }

    /* --- Visual FX --- */
    const c = document.getElementById("snow"), ctx = c.getContext("2d");
    let particles = [];
    function resize() { c.width = window.innerWidth; c.height = window.innerHeight; initParticles(); }
    function initParticles() {
        particles = [];
        const count = window.innerWidth < 800 ? 30 : 80;
        for(let i=0; i<count; i++) particles.push({
            x: Math.random() * c.width, y: Math.random() * c.height,
            size: Math.random() * 2, speed: Math.random() * 0.3 + 0.1, opacity: Math.random() * 0.5
        });
    }
    function animate() {
        ctx.clearRect(0, 0, c.width, c.height);
        particles.forEach(p => {
            ctx.fillStyle = `rgba(255, 255, 255, ${p.opacity})`;
            ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
            p.y += p.speed;
            if(p.y > c.height) { p.y = -5; p.x = Math.random() * c.width; }
        });
        requestAnimationFrame(animate);
    }
    
    window.addEventListener("resize", resize);
    resize(); animate(); initSplash(); verify();
</script>
</body>
</html>

